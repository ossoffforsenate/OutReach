<section class="hero is-link">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-centered has-text-centered">
        <div class="column is-half-tablet is-narrow-mobile">
          <p id="user-name" class="title is-size-1-desktop is-size-2-tablet is-size-3-mobile is-uppercase has-text-weight-normal mb-0">
            Admin Dashboard
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="all-stats" class="section">
  <p id="top-issues" class="title is-size-3-desktop is-size-4-tablet is-size-5-mobile is-uppercase has-text-weight-normal mb-0">
  Registration Stats
  </p>
  <br>
  <nav class="level">
    <div class="level-item has-text-centered">
      <div>
        <p style="color:navy">Total SROs</p>
        <p class="title" style="color:navy"><%= @users.size %></p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p style="color:royalblue">Total contacts</p>
        <p class="title" style="color:royalblue"><%= @voters.count %></p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p style="color:purple">Average network size</p>
        <p class="title" style="color:purple"><%= @voters.count/@users.count %></p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p style="color:green">Confirmed registrations</p>
        <p class="title" style="color:green"><%= @confirmed_registrations %></p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p style="color:orange">Pending registrations</p>
        <p class="title" style="color:orange"><%= @pending_registrations %></p>
      </div>
    </div>
    <div class="level-item has-text-centered">
      <div>
        <p style="color:crimson">Unregistered contacts</p>
        <p class="title" style="color:crimson"><%= @unregistered %></p>
      </div>
    </div>
  </nav>
  <div class="table-container">
    <table class="table is-fullwidth">
        <thead>
            <tr>
                <th>Confirmed/Approximate</th>
                <th>Total</th>
                <th>Progress (goal: 3,500 registrations)</th>
            </tr>
        </thead>
        <tbody>
            <td>
                Approximate (includes pending registrations)
            </td>
            <td>
                <%= @total_unofficial_registrations %>
            </td>
            <td style="width:70%">
                <progress class="progress is-info" value=<%= @total_unofficial_registrations %> max="3500"></progress>
            <td>
        </tbody>
        <tbody>
            <td>
                Confirmed
            </td>
            <td>
                <%= @confirmed_registrations %>
            </td>
            <td style="width:70%">
                <progress class="progress is-success" value=<%= @confirmed_registrations %> max="2900"></progress>
            <td>
        </tbody>
    </table>
  </div>
 
    <div class="container">
        <div class="columns is-multiline">
            <div class="column column is-full-tablet is-half-desktop">
                <p id="top-issues" class="title is-size-3-desktop is-size-4-tablet is-size-5-mobile is-uppercase has-text-weight-normal mb-0">
                Top Student Issues
                </p><br>
                <div class="table-container">
                    <table class="table is-half-width">
                        <thead>
                        <tr>
                            <th>Issue</th>
                            <th>Responses</th>
                        </tr>
                        </thead>
                        <tbody>
                            <% @sorted_survey_data.each_with_index do |issue| %>
                            <tr>
                                <td class="nowrap"><%= issue.keys.first %></td>
                                <td><%= issue.values.first %></td> 
                            </tr>
                            <% end %>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="column column is-full-tablet is-half-desktop">
                <p id="top-issues" class="title is-size-3-desktop is-size-4-tablet is-size-5-mobile is-uppercase has-text-weight-normal mb-0">
                Individual SRO Stats
                </p><br>
                <div class="table-container">
                    <table class="table is-half-width">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Network size</th>
                        </tr>
                        </thead>
                        <tbody>
                            <% @users.each_with_index do |user| %>
                            <tr>
                                <td class="nowrap"><%= user.display_name %></td>
                                <td><%= @relationships.select {|r| r.user_id == user.id}.count %></td>                             </tr>
                            <% end %>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div> 
</section>
